<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Hours Visual</title>
    <style>
        /* Page Styling */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }

        /* Bar Container */
        .bar-container {
            width: 600px; /* Total bar length */
            height: 50px; /* Bar height */
            background-color: lightgray;
            margin: 20px auto;
            position: relative;
        }

        /* Market Hours Bar */
        .market-bar {
            position: absolute;
            height: 100%;
            background-color: green;
        }

        /* Vertical Lines */
        .vertical-line {
            position: absolute;
            width: 2px;
            height: 100px;
            background-color: black;
            top: -25px; /* Extend above and below the bar */
        }

        /* Current Time Line */
        .current-time-line {
            position: absolute;
            width: 2px;
            height: 100px;
            background-color: red;
            top: -25px; /* Extend above and below the bar */
        }

        /* Label for the Market (Above the Bar) */
        .market-label {
            position: absolute;
            top: -60px; /* Place above the bar */
            font-size: 16px;
            font-weight: bold;
            transform: translateX(-50%);
            line-height: 1.5;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>New York Market Hours</h1>
    <div class="bar-container">
        <!-- New York Market Hours -->
        <div class="market-bar" style="width: 50%; left: 25%;"></div>
        <!-- Vertical Line at Start -->
        <div class="vertical-line" style="left: 25%;"></div>
        <!-- Vertical Line at End -->
        <div class="vertical-line" style="left: 75%;"></div>
        <!-- Current Time Line -->
        <div class="current-time-line" style="left: 0%;"></div>
        <!-- Market Label -->
        <div class="market-label" id="market-label">Loading...</div>
    </div>
    <p id="local-time"></p>

    <script>
        // Total hours in a day
        const totalHours = 24;

        // New York market hours (in New York local time)
        const nyStartHour = 9.5; // 9:30 AM (9.5 in decimal)
        const nyEndHour = 16; // 4:00 PM (16 in decimal)

        // Adjust New York market hours to the user's local time
        const nyTimezoneOffset = -5 * 60; // New York (EST) is UTC-5
        const localTimezoneOffset = new Date().getTimezoneOffset(); // User's local timezone in minutes
        const timezoneDifference = (localTimezoneOffset - nyTimezoneOffset) / 60; // Difference in hours

        // Calculate local start and end hours
        const localStartHour = (nyStartHour + timezoneDifference + totalHours) % totalHours;
        const localEndHour = (nyEndHour + timezoneDifference + totalHours) % totalHours;

        // Format hours into readable times
        function formatTime(hour) {
            const fullHour = Math.floor(hour);
            const minutes = hour % 1 === 0.5 ? "30" : "00";
            const ampm = fullHour >= 12 ? "PM" : "AM";
            const adjustedHour = fullHour % 12 === 0 ? 12 : fullHour % 12;
            return `${adjustedHour}:${minutes} ${ampm}`;
        }

        // Elements
        const barContainer = document.querySelector('.bar-container');
        const marketBar = document.querySelector('.market-bar');
        const verticalLines = document.querySelectorAll('.vertical-line');
        const currentTimeLine = document.querySelector('.current-time-line');
        const marketLabel = document.getElementById('market-label');
        const localTimeDisplay = document.getElementById('local-time');

        // Adjust market bar and vertical lines
        marketBar.style.left = (localStartHour / totalHours) * 100 + '%';
        marketBar.style.width = ((localEndHour - localStartHour) / totalHours) * 100 + '%';
        verticalLines[0].style.left = (localStartHour / totalHours) * 100 + '%';
        verticalLines[1].style.left = (localEndHour / totalHours) * 100 + '%';

        // Update the market label with local times
        marketLabel.innerHTML = `
            New York<br>
            Open: ${formatTime(localStartHour)} | Close: ${formatTime(localEndHour)}
        `;

        // Update current time line dynamically
        function updateCurrentTime() {
            const now = new Date();
            const currentHour = now.getHours() + now.getMinutes() / 60; // Current time in decimal hours
            const currentTimePosition = (currentHour / totalHours) * 100;

            currentTimeLine.style.left = currentTimePosition + '%';
            localTimeDisplay.textContent = `Your Local Time: ${now.toLocaleTimeString()}`;
        }

        // Update the current time line every second
        setInterval(updateCurrentTime, 1000);
    </script>
</body>
</html>
